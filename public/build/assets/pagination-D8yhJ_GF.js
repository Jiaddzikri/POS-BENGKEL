import{r as i,j as r,S as x}from"./app-BSuvoTbS.js";import{a as M,S as C}from"./index.module-D6TVJq3H.js";import{I as $}from"./input-Co4OhKCu.js";import{B as D}from"./button-B6cZ_Vso.js";import{D as F,a as _,b as k,c as E,d as R,e as I}from"./app-layout-iIO71zPT.js";import{F as T}from"./filter-vrvU-RHr.js";import{D as S,R as B}from"./react-datepicker-D8Z4oKbE.js";import{S as Q,a as L,b as A,c as H,e as V,d as j}from"./select-3uS57-AO.js";import{f as w}from"./setYear-oS4mZueu.js";import{a as O,$ as X,b as Y}from"./disabled-DbbLLAOw.js";import{s as q,o as N,K as G,_ as K,L as U}from"./render-1KRUqw0X.js";import{p as z}from"./use-disposables-CzBOH2P-.js";import{A as J,a as W}from"./arrow-right-BgGvKB9A.js";function Z({filters:e,link:t,dropdowns:o}){const[s,a]=i.useState(!1);return r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs(F,{children:[r.jsx(_,{asChild:!0,children:r.jsxs(D,{variant:"ghost",onClick:()=>a(!s),className:`inline-flex items-center rounded-md border px-3 py-2 text-sm font-medium transition-colors hover:bg-foreground hover:text-background ${!s&&!e.filter?"bg-background text-foreground":"bg-foreground text-background"}`,children:[r.jsx(T,{className:"mr-1 h-4 w-4"}),"Filters"]})}),r.jsx(k,{children:r.jsxs(E,{className:"w-56 mr-12 rounded-md border border-border bg-popover p-2 shadow-lg animate-in fade-in-0 slide-in-from-top-2",sideOffset:5,children:[r.jsx(R,{className:"fill-accent"}),o.map(l=>{const{id:u,name:n}=l;return r.jsx(I,{onClick:()=>x.get(route(t),{search:e.searchQuery,filter:u!=e.filter?u:null},{preserveState:!0,preserveScroll:!0,replace:!0}),className:`cursor-pointer select-none rounded-md px-3 py-2 text-sm transition-colors hover:bg-accent hover:text-backgorund focus:bg-foreground focus:text-background focus:outline-0 focus:border-0 my-1 ${e.filter!=u?"text-popover-foreground":"bg-foreground text-background border-0 outline-0"}`,children:n},u)})]})})]})})}function ee({startDate:e,setStartDate:t,endDate:o,setEndDate:s}){return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(S,{placeholderText:"Start Date",dateFormat:"yyyy-MM-dd",selected:e,onChange:a=>t(a),className:"w-32 cursor-pointer rounded-[8px] border px-3 py-[.3rem] outline-none placeholder:text-sm",portalId:"root"}),r.jsx(S,{placeholderText:"End Date",dateFormat:"yyyy-MM-dd",selected:o,onChange:a=>s(a),className:"w-32 cursor-pointer rounded-[8px] border px-3 py-[.3rem] outline-none placeholder:text-sm",portalId:"root"})]})}function re({selectedPeriod:e,setSelectedPeriod:t}){return r.jsxs(Q,{value:e,onValueChange:t,children:[r.jsx(L,{className:"w-32",children:r.jsx(A,{placeholder:"Pilih"})}),r.jsx(H,{children:r.jsxs(V,{children:[r.jsx(j,{value:"today",children:"Hari Ini"}),r.jsx(j,{value:"week",children:"Minggu Ini"}),r.jsx(j,{value:"month",children:"Bulan Ini"}),r.jsx(j,{value:"year",children:"Tahun Ini"})]})})]})}function te({onClick:e,isRefreshing:t}){return r.jsxs(D,{onClick:e,className:"flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700",children:[r.jsx(B,{className:`h-4 w-4 mr-2 ${t?"animate-spin":""}`}),"Refresh"]})}function Se({filters:e,dropdowns:t,link:o,date:s}){const[a,l]=i.useState(e.searchQuery||""),[u]=M(a,300),[n,d]=i.useState(s!=null&&s.startDate?new Date(s.startDate):null),[c,m]=i.useState(s!=null&&s.endDate?new Date(s.endDate):null),[f,p]=i.useState((s==null?void 0:s.range)||""),[b,g]=i.useState(!1);i.useEffect(()=>{x.get(route(o),{search:a,filter:e.filter},{preserveState:!0,preserveScroll:!0,replace:!0})},[u]),i.useEffect(()=>{if(!n||!c||c<n)return;const v=w(n,"yyyy-MM-dd"),P=w(c,"yyyy-MM-dd");x.get(route(o),{startDate:v,endDate:P},{preserveState:!0,replace:!0})},[n,c]),i.useEffect(()=>{f&&(d(null),m(null),x.get(route(o),{range:f},{preserveState:!0,replace:!0}))},[f]);const h=()=>{g(!0),x.get(route(o),e,{preserveState:!0,onFinish:()=>g(!1)})};return r.jsx("div",{className:"px-6 py-2",children:r.jsx("div",{className:"mb-6 rounded-lg border",children:r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[r.jsxs("div",{className:"relative max-w-md flex-1",children:[r.jsx(C,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform"}),r.jsx($,{type:"text",placeholder:"Search data...",value:a,onChange:v=>l(v.target.value),className:"w-full rounded-md border py-2 pr-4 pl-9 text-sm focus:border-transparent focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),t&&(t==null?void 0:t.length)>0&&r.jsx(Z,{dropdowns:t,filters:e,link:o}),s&&r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx(ee,{startDate:n,setStartDate:d,endDate:c,setEndDate:m}),r.jsx(re,{selectedPeriod:f,setSelectedPeriod:p}),r.jsx(te,{onClick:h,isRefreshing:b})]})]})})})})}function se(e){return q.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}function ae(e){let t=e.width/2,o=e.height/2;return{top:e.clientY-o,right:e.clientX+t,bottom:e.clientY+o,left:e.clientX-t}}function oe(e,t){return!(!e||!t||e.right<t.left||e.left>t.right||e.bottom<t.top||e.top>t.bottom)}function ne({disabled:e=!1}={}){let t=i.useRef(null),[o,s]=i.useState(!1),a=z(),l=N(()=>{t.current=null,s(!1),a.dispose()}),u=N(n=>{if(a.dispose(),t.current===null){t.current=n.currentTarget,s(!0);{let d=se(n.currentTarget);a.addEventListener(d,"pointerup",l,!1),a.addEventListener(d,"pointermove",c=>{if(t.current){let m=ae(c);s(oe(m,t.current.getBoundingClientRect()))}},!1),a.addEventListener(d,"pointercancel",l,!1)}}});return{pressed:o,pressProps:e?{}:{onPointerDown:u,onPointerUp:l,onClick:l}}}let le="button";function ce(e,t){var o;let s=O(),{disabled:a=s||!1,autoFocus:l=!1,...u}=e,{isFocusVisible:n,focusProps:d}=X({autoFocus:l}),{isHovered:c,hoverProps:m}=Y({isDisabled:a}),{pressed:f,pressProps:p}=ne({disabled:a}),b=K({ref:t,type:(o=u.type)!=null?o:"button",disabled:a||void 0,autoFocus:l},d,m,p),g=i.useMemo(()=>({disabled:a,hover:c,focus:n,active:f,autofocus:l}),[a,c,n,f,l]);return U()({ourProps:b,theirProps:u,slot:g,defaultTag:le,name:"Button"})}let y=G(ce);function we({pagination:e,link:t,data:o,filters:s}){const a=l=>{const{per_page:u,current_page:n,total:d,last_page:c}=l,m=[];if(Math.ceil(d/u)<1)return null;const p=2;let b=Math.max(1,n-p),g=Math.min(c,n+p);n-p<1&&(g=Math.min(c,1+p*2)),n+p>c&&(b=Math.max(1,c-p*2));for(let h=b;h<=g;h++){const v=h===n;m.push(r.jsx(y,{disabled:v,onClick:()=>x.get(route(t),{page:h},{preserveState:!0,preserveScroll:!0,replace:!0}),className:`rounded-lg px-4 py-2 text-sm ${v?"cursor-default":"border"}`,children:h},h))}return r.jsx("div",{className:"flex gap-2",children:m})};return r.jsx("div",{className:"px-6 py-2",children:r.jsx("div",{className:"mt-6 rounded-lg border p-4 shadow-sm",children:r.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:[r.jsxs("span",{className:"text-sm text-gray-100",children:["Menampilkan ",o.length,"-",e.per_page," dari ",e.total," item"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(y,{disabled:e.current_page===1,onClick:()=>x.get(route(t),{search:s.searchQuery,page:e.current_page-1},{preserveState:!0,preserveScroll:!0,replace:!0}),className:`rounded-lg border px-4 py-2 ${e.current_page===1?"hidden":"block"}`,children:r.jsx(J,{className:"w-4 h-4"})}),a(e),r.jsx(y,{disabled:e.current_page===e.last_page,onClick:()=>x.get(route(t),{search:s.searchQuery,page:e.current_page+1},{preserveState:!0,preserveScroll:!0,replace:!0}),className:`rounded-lg border px-3 py-2 ${e.current_page===e.last_page?"hidden":"block"}`,children:r.jsx(W,{className:"w-4 h-4"})})]})]})})})}export{we as P,Se as S};
