import{j as e,$ as q,r as c,b as G,S as v,L as X}from"./app-BSuvoTbS.js";import{P as J}from"./plus-Dvb-4iQ1.js";import{P as W}from"./package-DSSj8c6x.js";import{c as $}from"./createLucideIcon-ZpcOBMUu.js";import{T as Y}from"./triangle-alert-Dhdn3O8q.js";import{f as Z,D as ee,a as se,c as re,e as te,A as ae}from"./app-layout-iIO71zPT.js";import{n as _,g as M}from"./number-format-C9-KG7aE.js";import{t as le}from"./index-7cjgg6I-.js";import{A as ne,a as ce,b as ie}from"./accordion-DrT5Zet0.js";import{A as de,a as oe,b as me,c as xe,d as ue,e as he,f as pe,g as ge,h as je}from"./alert-dialog-dSuz3pEb.js";import{S as fe,c as be,B as d}from"./button-B6cZ_Vso.js";import{c as ve}from"./utils-jAU0Cazi.js";import{D as Ne,b as ye,c as ke,d as we}from"./dialog-BMJ-20Gb.js";import{P as Se}from"./pen-line-Cn69ipjg.js";import{T as Ce}from"./trash-2-BS0vOb9V.js";import{A as _e,a as Ae}from"./arrow-right-BgGvKB9A.js";import{a as B,S as Pe}from"./index.module-D6TVJq3H.js";import{I as H}from"./input-Co4OhKCu.js";import{L as T}from"./label-CriFCr2L.js";import{C as De,S as V,a as Q,b as E,c as L,d as j}from"./select-3uS57-AO.js";import{X as O}from"./x-CyxTbmAj.js";import{F as Me}from"./filter-vrvU-RHr.js";/* empty css            */import"./index-DVmWm2VB.js";import"./index-muPcKthH.js";import"./index-BIqVCQeL.js";import"./index-o8OQ9nSE.js";import"./index-B3pNf6Lt.js";import"./index-0zabl2EX.js";import"./check-eyUfg_75.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Ie=$("EllipsisVertical",Te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Be=$("Tag",Fe);function He(){return e.jsx("div",{className:"px-6 py-2",children:e.jsxs("div",{className:"flex flex-col gap-4 lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Item Management"}),e.jsx("p",{className:"mt-1 text-sm",children:"Manage your products and inventory"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:e.jsx(q,{href:"/item/create",children:e.jsxs("button",{className:"inline-flex items-center rounded-md border border-transparent bg-blue-600 px-3 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Add Item"]})})})]})})}function Ve({stats:t}){return e.jsx("div",{className:"px-6 py-2",children:e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"rounded-lg border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Total Items"}),e.jsx("p",{className:"text-2xl font-semibold",children:t.total})]}),e.jsx("div",{className:"rounded-lg bg-blue-100 p-2",children:e.jsx(W,{className:"h-6 w-6 text-blue-600"})})]})}),e.jsx("div",{className:"rounded-lg border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Active Items"}),e.jsx("p",{className:"text-2xl font-semibold",children:t.active_items})]}),e.jsx("div",{className:"rounded-lg bg-green-100 p-2",children:e.jsx(Be,{className:"h-6 w-6 text-green-600"})})]})}),e.jsx("div",{className:"rounded-lg border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Low Stock"}),e.jsx("p",{className:"text-2xl font-semibold text-orange-600",children:t.low_stock})]}),e.jsx("div",{className:"rounded-lg bg-orange-100 p-2",children:e.jsx(Y,{className:"h-6 w-6 text-orange-600"})})]})}),e.jsx("div",{className:"rounded-lg border p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm",children:"Categories"}),e.jsx("p",{className:"text-2xl font-semibold",children:t.categories})]}),e.jsx("div",{className:"rounded-lg bg-purple-100 p-2",children:e.jsx(Z,{className:"h-6 w-6 text-purple-600"})})]})})]})})}const Qe=be("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-auto",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Ee({className:t,variant:l,asChild:n=!1,...o}){const p=n?fe:"span";return e.jsx(p,{"data-slot":"badge",className:ve(Qe({variant:l}),t),...o})}function Le({items:t,pagination:l,filters:n}){const[o,p]=c.useState(!1),[N,y]=c.useState(null),[w,S]=c.useState(null),I=s=>{const{per_page:a,current_page:g,total:f,last_page:b}=s,P=[];if(Math.ceil(f/a)<1)return null;const u=2;let k=Math.max(1,g-u),D=Math.min(b,g+u);g-u<1&&(D=Math.min(b,1+u*2)),g+u>b&&(k=Math.max(1,b-u*2));for(let h=k;h<=D;h++){const C=h===g;P.push(e.jsx(d,{disabled:C,onClick:()=>v.get(route("item.index"),{page:h},{preserveState:!0,preserveScroll:!0,replace:!0}),className:`rounded-lg px-3 py-2 ${C?"cursor-default":"border"}`,children:h},h))}return e.jsx("div",{className:"flex gap-2",children:P})},m=s=>{y(s),setTimeout(()=>{p(!0)},300)};function A(s){return w!==s.id?null:e.jsx("tr",{className:"gap-5",children:e.jsx("td",{className:"px-4 py-4",colSpan:6,children:e.jsx(ne,{type:"single",collapsible:!0,className:"w-full",value:s.id,children:e.jsx(ce,{value:s.id,children:e.jsx(ie,{className:"accordion-content flex flex-col p-0 text-balance",children:e.jsxs("div",{className:"mt-2",children:[e.jsx("h4",{className:"mb-2 text-xs font-bold uppercase",children:"Varian Produk:"}),e.jsxs("table",{className:"w-full rounded-md border text-xs",children:[e.jsx("thead",{className:"",children:e.jsxs("tr",{className:"text-left",children:[e.jsx("th",{className:"p-2 font-medium",children:"Nama Varian"}),e.jsx("th",{className:"p-2 font-medium",children:"SKU"}),e.jsx("th",{className:"p-2 text-center font-medium",children:"Stok"}),e.jsx("th",{className:"p-2 text-center font-medium",children:"Harga Tambahan"}),e.jsx("th",{className:"p-2 text-center font-medium",children:"Harga Final"}),e.jsx("th",{className:"p-2 text-center font-medium",children:"Aksi"})]})}),e.jsx("tbody",{children:s.variants.map(a=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-2",children:a.name}),e.jsx("td",{className:"p-2 font-mono",children:a.sku}),e.jsx("td",{className:"p-2 text-center",children:a.stock}),e.jsx("td",{className:"p-2 text-center font-semibold",children:_(Number(a.additional_price))}),e.jsx("td",{className:"p-2 text-center font-semibold",children:_(Number(s.selling_price)+Number(a.additional_price))}),e.jsx("td",{className:"p-2",children:e.jsx("div",{className:"flex items-center justify-center gap-2",children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(d,{variant:"outline",size:"icon",className:"h-7 w-7",children:e.jsx(Ie,{className:"h-4 w-4"})})}),e.jsx(re,{children:e.jsx(te,{onClick:()=>m(a.sku),className:"cursor-pointer",children:"Tampilkan QrCode Men"})})]})})})]},a.id))})]})]})})})})})})}const x=s=>{v.delete(route("item.destroy",{item:s}),{onSuccess:()=>{},onError:()=>{}})};return e.jsxs("div",{className:"px-6 py-2",children:[e.jsx("div",{className:"rounded-lg border",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Nama Item"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Kategori"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Brand"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Harga Dasar"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Aksi"})]})}),e.jsx("tbody",{className:"divide-y",children:t.map(s=>e.jsxs(G.Fragment,{children:[e.jsxs("tr",{onClick:()=>S(w===s.id?null:s.id),className:"cursor-pointer transition duration-700 ease-out hover:bg-accent-foreground hover:text-background",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm font-medium",children:s.name})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm",children:s.category_name})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm",children:s.brand})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm",children:_(s.selling_price)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx(Ee,{variant:s.is_active?"default":"destructive",className:`${s.is_active?"bg-green-100 text-green-600":"bg-red-100 text-red-600"} `,children:s.is_active?"Aktif":"Nonaktif"})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{onClick:a=>{a.stopPropagation(),v.get(route("item.edit",{item:s.id}))},variant:"outline",size:"icon",className:"h-7 w-7 text-slate-600 hover:text-blue-600 dark:bg-black dark:text-white dark:hover:bg-black dark:hover:text-blue-600",children:e.jsx(Se,{className:"h-4 w-4"})}),e.jsxs(de,{children:[e.jsx(oe,{asChild:!0,children:e.jsx(d,{onClick:a=>a.stopPropagation(),variant:"outline",size:"icon",className:"h-7 w-7 text-slate-600 hover:text-red-600 dark:bg-black dark:text-white dark:hover:bg-black dark:hover:text-red-600",children:e.jsx(Ce,{className:"h-4 w-4"})})}),e.jsxs(me,{children:[e.jsxs(xe,{children:[e.jsx(ue,{children:"Hapus Item"}),e.jsxs(he,{children:['Apakah Anda yakin ingin menghapus item "',s.name,'"? Tindakan ini tidak dapat dibatalkan dan akan menghapus semua data item termasuk variannya.']})]}),e.jsxs(pe,{children:[e.jsx(ge,{children:"Batal"}),e.jsx(je,{onClick:()=>x(s.id),className:"bg-red-600 hover:bg-red-700",children:"Hapus"})]})]})]})]})})]}),A(s)]},s.id))})]})})}),e.jsx("div",{className:"mt-6 rounded-lg border p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:["Menampilkan ",(l.current_page-1)*l.per_page+1,"-",Math.min(l.current_page*l.per_page,l.total)," dari ",l.total," item"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(d,{disabled:l.current_page===1,onClick:()=>v.get(route("item.index"),{...n,page:l.current_page-1},{preserveState:!0,preserveScroll:!0,replace:!0}),variant:"outline",size:"icon",className:"h-8 w-8",children:e.jsx(_e,{className:"h-4 w-4"})}),I(l),e.jsx(d,{disabled:l.current_page===l.last_page,onClick:()=>v.get(route("item.index"),{...n,page:l.current_page+1},{preserveState:!0,preserveScroll:!0,replace:!0}),variant:"outline",size:"icon",className:"h-8 w-8",children:e.jsx(Ae,{className:"h-4 w-4"})})]})]})}),e.jsx(Ne,{open:o,onOpenChange:p,children:e.jsxs(ye,{className:"sm:max-w-md",children:[e.jsx(ke,{children:e.jsx(we,{className:"text-center",children:"QR Code Men"})}),e.jsx("div",{className:"flex justify-center p-4",children:N&&e.jsx("img",{className:"mx-auto rounded-lg border",src:`/qr-code/${N}`,alt:`QR Code untuk SKU: ${N}`,onError:s=>{const a=s.currentTarget;console.error("Failed to load QR code:",a.src),le.error("Gagal memuat QR Code. Silakan coba lagi.")}})}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:["SKU: ",N]})]})})]})}function Re({filters:t,categories:l=[]}){var R,z;const[n,o]=c.useState(t.searchQuery||""),[p,N]=c.useState(!1),[y,w]=c.useState(t.category||""),[S,I]=c.useState(t.status||""),[m,A]=c.useState(((R=t.minPrice)==null?void 0:R.toString())||""),[x,s]=c.useState(((z=t.maxPrice)==null?void 0:z.toString())||""),[a,g]=c.useState(t.sortBy||"created_at"),[f,b]=c.useState(t.sortOrder||"desc"),[P]=B(n,300),[F]=B(m,500),[u]=B(x,500);c.useEffect(()=>{k()},[P]),c.useEffect(()=>{var r,i;(F!==(((r=t.minPrice)==null?void 0:r.toString())||"")||u!==(((i=t.maxPrice)==null?void 0:i.toString())||""))&&k()},[F,u]);const k=()=>{const r={search:n||void 0,category:y||void 0,status:S||void 0,minPrice:m?M(m):void 0,maxPrice:x?M(x):void 0,sortBy:a||void 0,sortOrder:f||void 0};Object.keys(r).forEach(i=>{(r[i]===""||r[i]===void 0||r[i]===null)&&delete r[i]}),v.get(route("item.index"),r,{preserveState:!0,preserveScroll:!0,replace:!0})},D=()=>{o(""),w(""),I(""),A(""),s(""),g("created_at"),b("desc"),v.get(route("item.index"),{},{preserveState:!0,preserveScroll:!0,replace:!0})},h=y||S||m||x||n||a||f,C=[n,y,S,m,x,a!=="created_at"?a:null,f!=="desc"?f:null].filter(Boolean).length,K=r=>{const i=M(r);A(i)},U=r=>{const i=M(r);s(i)};return e.jsx("div",{className:"px-6 py-2",children:e.jsxs("div",{className:"mb-6 rounded-lg border",children:[e.jsx("div",{className:"border-b p-4",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"relative max-w-md flex-1",children:[e.jsx(Pe,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform"}),e.jsx(H,{type:"text",placeholder:"Cari item...",value:n,onChange:r=>o(r.target.value),className:"w-full rounded-md border py-2 pr-4 pl-9 text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-500 focus:outline-none"}),n&&e.jsx(d,{variant:"ghost",size:"sm",onClick:()=>o(""),className:"absolute top-1/2 right-2 h-6 w-6 -translate-y-1/2 transform p-0",children:e.jsx(O,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[h&&e.jsxs("span",{className:"rounded-full px-2 py-1 text-xs text-blue-700",children:[C," filter",C>1?"s":""," active"]}),e.jsxs(d,{variant:"outline",onClick:()=>N(!p),className:"inline-flex items-center rounded-md border px-3 py-2 text-sm font-medium transition-colors",children:[e.jsx(Me,{className:"mr-2 h-4 w-4"}),"Filters",e.jsx(De,{className:`ml-1 h-4 w-4 transition-transform ${p?"rotate-180":""}`})]}),h&&e.jsxs(d,{variant:"outline",onClick:D,className:"inline-flex items-center rounded-md border px-3 py-2 text-sm font-medium text-red-700 hover:bg-red-50 hover:text-red-800",children:[e.jsx(O,{className:"mr-2 h-4 w-4"}),"Clear"]})]})]})}),p&&e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-4",children:[l.length>0&&e.jsxs("div",{children:[e.jsx(T,{className:"mb-2 block text-sm font-medium",children:"Kategori"}),e.jsxs(V,{value:y,onValueChange:w,children:[e.jsx(Q,{children:e.jsx(E,{placeholder:"Semua Kategori"})}),e.jsxs(L,{children:[e.jsx(j,{value:"",children:"Semua Kategori"}),l.map(r=>e.jsx(j,{value:r.id,children:r.name},r.id))]})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"mb-2 block text-sm font-medium",children:"Range Harga"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(H,{type:"text",placeholder:"Min",value:m?_(parseInt(m)):"",onChange:r=>K(r.target.value),className:"w-full rounded-md border px-3 py-2 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none"}),e.jsx(H,{type:"text",placeholder:"Max",value:x?_(parseInt(x)):"",onChange:r=>U(r.target.value),className:"w-full rounded-md border px-3 py-2 text-sm focus:border-blue-500 focus:ring-1 focus:ring-blue-500 focus:outline-none"})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"mb-2 block text-sm font-medium",children:"Urutkan Berdasarkan"}),e.jsxs(V,{value:a,onValueChange:g,children:[e.jsx(Q,{children:e.jsx(E,{placeholder:"Urutkan"})}),e.jsxs(L,{children:[e.jsx(j,{value:"created_at",children:"Tanggal Dibuat"}),e.jsx(j,{value:"updated_at",children:"Tanggal Diperbarui"}),e.jsx(j,{value:"name",children:"Nama"}),e.jsx(j,{value:"price",children:"Harga"})]})]})]}),e.jsxs("div",{children:[e.jsx(T,{className:"mb-2 block text-sm font-medium",children:"Urutan"}),e.jsxs(V,{value:f,onValueChange:b,children:[e.jsx(Q,{children:e.jsx(E,{placeholder:"Urutan"})}),e.jsxs(L,{children:[e.jsx(j,{value:"desc",children:"Terbaru/Tertinggi"}),e.jsx(j,{value:"asc",children:"Terlama/Terendah"})]})]})]}),e.jsx("div",{className:"flex items-end justify-end",children:e.jsx(d,{onClick:k,className:"bg-blue-600 text-white hover:bg-blue-700",children:"Terapkan Filter"})})]})})]})})}function fs({items:t,filters:l,stats:n}){const o=[{title:"Item Management",href:"/item"}];return e.jsxs(ae,{breadcrumbs:o,children:[e.jsx(X,{title:"Item Management"}),e.jsx(He,{}),e.jsx(Ve,{stats:n}),e.jsx(Re,{filters:l}),e.jsx(Le,{filters:l,pagination:t.meta,items:t.data})]})}export{fs as default};
