import{j as e,$ as R,r as d,L as P,S as f}from"./app-BSuvoTbS.js";import{n as x}from"./number-format-C9-KG7aE.js";import{c as g}from"./createLucideIcon-ZpcOBMUu.js";import{D as b,R as M}from"./react-datepicker-D8Z4oKbE.js";import{B as T}from"./button-B6cZ_Vso.js";import{S as I,a as _,b as E,c as L,e as B,d as j}from"./select-3uS57-AO.js";import{D as H}from"./download-Dlfg5J8W.js";import{a as F,T as V,g as z,C as U,b as q,c as K,P as G,B as J,p as W,e as Z,f as O}from"./index-DF94t5dJ.js";import{S as Q}from"./shopping-cart-kyGWFypo.js";import{f as X,A as Y}from"./app-layout-iIO71zPT.js";import{P as ee}from"./package-DSSj8c6x.js";import{f as w}from"./setYear-oS4mZueu.js";/* empty css            */import"./utils-jAU0Cazi.js";import"./index-o8OQ9nSE.js";import"./index-B3pNf6Lt.js";import"./index-muPcKthH.js";import"./differenceInCalendarDays-D_tGss6D.js";import"./parseISO-ClzP4Ygj.js";import"./index-BIqVCQeL.js";import"./check-eyUfg_75.js";import"./index-DVmWm2VB.js";import"./x-CyxTbmAj.js";import"./input-Co4OhKCu.js";import"./index-7cjgg6I-.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],ae=g("Activity",se);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],re=g("ArrowDown",te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],le=g("ArrowUp",ne);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],ce=g("ChartPie",ie);function de({category:s,total_revenue:a,total_quantity:t}){return e.jsxs("div",{className:"flex items-center justify-between rounded-lg p-4",children:[e.jsx("div",{className:"flex items-center space-x-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:s}),e.jsx("p",{className:"text-xs",children:`Rp${x(a)}`})]})}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-sm font-bold",children:t})})]})}function oe({bestSellingCategory:s}){return e.jsx("div",{children:e.jsxs("div",{className:"mb-6 rounded-lg border shadow-sm",children:[e.jsx("div",{className:"border-b p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Analisis Kategori"}),e.jsx(ce,{className:"h-5 w-5 text-gray-400"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-3",children:s.map((a,t)=>e.jsx(de,{...a},t))})})]})})}function me({selectedPeriod:s,setSelectedPeriod:a,isRefreshing:t,handleRefresh:n,setStartDate:r,setEndDate:o,startDate:h,endDate:p,params:m}){return e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Laporan Analitik"}),e.jsx("p",{className:"text-sm",children:"Dashboard analitik Point of Sale"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{placeholderText:"Start Date",portalId:"root",dateFormat:"yyyy-MM-dd",selected:h,onChange:l=>r(l),className:"w-32 cursor-pointer rounded-[8px] border px-3 py-[.3rem] outline-none placeholder:text-sm"}),e.jsx(b,{portalId:"root",placeholderText:"End Date",dateFormat:"yyyy-MM-dd",selected:p,onChange:l=>o(l),className:"w-32 cursor-pointer rounded-[8px] border px-2 py-[.3rem] outline-none placeholder:text-sm"}),e.jsxs(I,{value:s,onValueChange:a,children:[e.jsx(_,{className:"w-32",children:e.jsx(E,{placeholder:"select date"})}),e.jsx(L,{children:e.jsxs(B,{children:[e.jsx(j,{value:"today",children:"Hari Ini"}),e.jsx(j,{value:"week",children:"Minggu Ini"}),e.jsx(j,{value:"month",children:"Bulan Ini"}),e.jsx(j,{value:"year",children:"Tahun Ini"})]})})]}),e.jsxs(T,{onClick:n,className:"flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700",children:[e.jsx(M,{className:`h-4 w-4 ${t?"animate-spin":""}`}),e.jsx("span",{children:"Refresh"})]}),e.jsxs(R,{href:route("analytical.preview",{range:s,startDate:h,endDate:p}),className:"flex items-center rounded-lg bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-200",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"Export"})]})]})]})})}function xe({children:s}){return e.jsx("div",{className:"min-h-screen",children:s})}function u({title:s,value:a,change:t,changeType:n,icon:r}){return e.jsx("div",{className:"overflow-hidden border sm:rounded-lg",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:s}),e.jsx("p",{className:"text-2xl font-bold",children:a}),e.jsxs("div",{className:"mt-2 flex items-center",children:[n==="increase"?e.jsx(le,{className:"mr-1 h-4 w-4 text-green-500"}):e.jsx(re,{className:"mr-1 h-4 w-4 text-red-500"}),e.jsx("span",{className:`text-sm font-medium ${n==="increase"?"text-green-600":"text-red-600"}`,children:t})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-indigo-100",children:r})})]})})})}function he({revenue:s,transaction:a,grossProfit:t,averageTransaction:n}){return e.jsxs("div",{className:"mb-8 grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(u,{title:"Total Pendapatan",value:`Rp ${x(s.revenue)}`,change:`${s.percentage}%`,changeType:s.trend,icon:e.jsx(F,{className:"h-6 w-6 text-indigo-600"})}),e.jsx(u,{title:"Total Transaksi",value:`${a.total}`,change:`${a.percentage}%`,changeType:a.trend,icon:e.jsx(Q,{className:"h-6 w-6 text-indigo-600"})}),e.jsx(u,{title:"Laba Kotor",value:`Rp ${x(t.grossProfit)}`,change:`${t.percentage}%`,changeType:t.trend,icon:e.jsx(V,{className:"h-6 w-6 text-indigo-600"})}),e.jsx(u,{title:"Rata-rata Transaksi",value:`Rp ${x(n.averageValue)}`,change:`${n.percentage}%`,changeType:n.trend,icon:e.jsx(X,{className:"h-6 w-6 text-indigo-600"})})]})}function pe({rank:s,item_name:a,category:t,total_quantity:n,total_revenue:r,sku:o}){return e.jsxs("div",{className:"flex items-center justify-between border-b py-3 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full",children:e.jsxs("span",{className:"text-sm font-medium",children:["#",s]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:`${a} ${o}`}),e.jsx("p",{className:"text-xs text-gray-500",children:t})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-medium",children:[n," terjual"]}),e.jsx("p",{className:"text-xs",children:`Rp${x(r)}`})]})})]})}function je({bestSelling:s}){return e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"rounded-lg border",children:[e.jsx("div",{className:"border-b p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Produk Terlaris"}),e.jsx(ee,{className:"h-5 w-5"})]})}),e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-1",children:s.map((a,t)=>e.jsx(pe,{rank:t+1,...a},a.sku))})})]})})}U.register(q,K,G,J,W,Z,O);function ue({getSalesTrend:s}){const a={labels:s.labels,datasets:[{label:"Penjualan Hari Ini",data:s.value,backgroundColor:"rgb(79,57,246)",borderColor:"rgb(79,57,246)",borderWidth:1}]},t={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",display:!1},title:{display:!0}},scales:{y:{beginAtZero:!0}}};return e.jsxs("div",{className:"mb-8 rounded-lg border",children:[e.jsx("div",{className:"border-b p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Analisis Tren Penjualan"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ae,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm",children:"Penjualan per Jam"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex h-80 items-end justify-between space-x-2",children:e.jsx(z,{options:t,data:a})}),e.jsx("div",{className:"mt-4 flex items-center justify-center space-x-6",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-indigo-500"}),e.jsx("span",{className:"text-sm",children:"Penjualan Hari Ini"})]})})]})]})}const ze=({revenue:s,transaction:a,grossProfit:t,averageTransaction:n,filters:r,getSalesTrend:o,bestSellingItem:h,bestSellingCategory:p})=>{const[m,l]=d.useState(r.range),[S,N]=d.useState(!1),[i,y]=d.useState(r.startDate!==null?new Date(r.startDate):null),[c,v]=d.useState(r.endDate!==null?new Date(r.endDate):null),D=()=>{N(!0),f.get(route("analytical.index"),r,{preserveState:!0,onFinish:()=>N(!1)})},k=()=>{y(null),v(null),f.get(route("analytical.index"),{range:m},{preserveState:!0,replace:!0})},C=()=>{if(l(""),!i||!c||c<i)return;const A=w(i??"","yyyy-MM-dd"),$=w(c??"","yyyy-MM-dd");f.get(route("analytical.index"),{startDate:A,endDate:$},{preserveState:!0,replace:!0})};return d.useEffect(()=>{m&&k()},[m]),d.useEffect(()=>{!i||!c||C()},[i,c]),e.jsxs(Y,{children:[e.jsx(P,{title:"Analytical Reports "}),e.jsxs(xe,{children:[e.jsx(me,{isRefreshing:S,handleRefresh:D,selectedPeriod:m,setSelectedPeriod:l,startDate:i,setStartDate:y,endDate:c,setEndDate:v,params:r}),e.jsxs("div",{className:"mx-auto max-w-7xl px-6",children:[e.jsx(he,{revenue:s,transaction:a,grossProfit:t,averageTransaction:n}),e.jsx(ue,{getSalesTrend:o}),e.jsxs("div",{className:"grid grid-cols-1 gap-8 lg:grid-cols-3",children:[e.jsx(je,{bestSelling:h}),e.jsx(oe,{bestSellingCategory:p})]})]})]})]})};export{ze as default};
