import{r as c,j as e,S as m}from"./app-DU2ribiw.js";import{a as M,S as C}from"./index.module-CKLkyo3k.js";import{I as P}from"./input-DRGjZ_Fc.js";import{B as w}from"./button-CW_BygfF.js";import{D as _,a as k,b as I,c as F,d as R,e as E}from"./app-layout-u2djOQda.js";import{F as B}from"./filter-GVI5UFDH.js";import{D as S,R as Q}from"./react-datepicker-BbGtZqg0.js";import{S as $,a as T,b as A,c as H,e as V,d as y}from"./select-BvX41nsz.js";import{f as N}from"./setYear-oS4mZueu.js";import{H as v}from"./button-B7FeFBqm.js";import{A as q,a as G}from"./arrow-right-BuGL_Tju.js";function L({filters:r,link:s,dropdowns:o}){const[t,n]=c.useState(!1);return e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(_,{children:[e.jsx(k,{asChild:!0,children:e.jsxs(w,{variant:"ghost",onClick:()=>n(!t),className:`inline-flex items-center rounded-md border px-3 py-2 text-sm font-medium transition-colors hover:bg-foreground hover:text-background ${!t&&!r.filter?"bg-background text-foreground":"bg-foreground text-background"}`,children:[e.jsx(B,{className:"mr-1 h-4 w-4"}),"Filters"]})}),e.jsx(I,{children:e.jsxs(F,{className:"w-56 mr-12 rounded-md border border-border bg-popover p-2 shadow-lg animate-in fade-in-0 slide-in-from-top-2",sideOffset:5,children:[e.jsx(R,{className:"fill-accent"}),o.map(x=>{const{id:u,name:a}=x;return e.jsx(E,{onClick:()=>m.get(route(s),{search:r.searchQuery,filter:u!=r.filter?u:null},{preserveState:!0,preserveScroll:!0,replace:!0}),className:`cursor-pointer select-none rounded-md px-3 py-2 text-sm transition-colors hover:bg-accent hover:text-backgorund focus:bg-foreground focus:text-background focus:outline-0 focus:border-0 my-1 ${r.filter!=u?"text-popover-foreground":"bg-foreground text-background border-0 outline-0"}`,children:a},u)})]})})]})})}function O({startDate:r,setStartDate:s,endDate:o,setEndDate:t}){return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{placeholderText:"Start Date",dateFormat:"yyyy-MM-dd",selected:r,onChange:n=>s(n),className:"w-32 cursor-pointer rounded-[8px] border px-3 py-[.3rem] outline-none placeholder:text-sm",portalId:"root"}),e.jsx(S,{placeholderText:"End Date",dateFormat:"yyyy-MM-dd",selected:o,onChange:n=>t(n),className:"w-32 cursor-pointer rounded-[8px] border px-3 py-[.3rem] outline-none placeholder:text-sm",portalId:"root"})]})}function z({selectedPeriod:r,setSelectedPeriod:s}){return e.jsxs($,{value:r,onValueChange:s,children:[e.jsx(T,{className:"w-32",children:e.jsx(A,{placeholder:"Pilih"})}),e.jsx(H,{children:e.jsxs(V,{children:[e.jsx(y,{value:"today",children:"Hari Ini"}),e.jsx(y,{value:"week",children:"Minggu Ini"}),e.jsx(y,{value:"month",children:"Bulan Ini"}),e.jsx(y,{value:"year",children:"Tahun Ini"})]})})]})}function J({onClick:r,isRefreshing:s}){return e.jsxs(w,{onClick:r,className:"flex items-center rounded-lg bg-indigo-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-indigo-700",children:[e.jsx(Q,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh"]})}function oe({filters:r,dropdowns:s,link:o,date:t}){const[n,x]=c.useState(r.searchQuery||""),[u]=M(n,300),[a,j]=c.useState(t!=null&&t.startDate?new Date(t.startDate):null),[l,h]=c.useState(t!=null&&t.endDate?new Date(t.endDate):null),[f,d]=c.useState((t==null?void 0:t.range)||""),[b,g]=c.useState(!1);c.useEffect(()=>{m.get(route(o),{search:n,filter:r.filter},{preserveState:!0,preserveScroll:!0,replace:!0})},[u]),c.useEffect(()=>{if(!a||!l||l<a)return;const p=N(a,"yyyy-MM-dd"),D=N(l,"yyyy-MM-dd");m.get(route(o),{startDate:p,endDate:D},{preserveState:!0,replace:!0})},[a,l]),c.useEffect(()=>{f&&(j(null),h(null),m.get(route(o),{range:f},{preserveState:!0,replace:!0}))},[f]);const i=()=>{g(!0),m.get(route(o),r,{preserveState:!0,onFinish:()=>g(!1)})};return e.jsx("div",{className:"px-6 py-2",children:e.jsx("div",{className:"mb-6 rounded-lg border",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"relative max-w-md flex-1",children:[e.jsx(C,{className:"absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2 transform"}),e.jsx(P,{type:"text",placeholder:"Search data...",value:n,onChange:p=>x(p.target.value),className:"w-full rounded-md border py-2 pr-4 pl-9 text-sm focus:border-transparent focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),s&&(s==null?void 0:s.length)>0&&e.jsx(L,{dropdowns:s,filters:r,link:o}),t&&e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(O,{startDate:a,setStartDate:j,endDate:l,setEndDate:h}),e.jsx(z,{selectedPeriod:f,setSelectedPeriod:d}),e.jsx(J,{onClick:i,isRefreshing:b})]})]})})})})}function ne({pagination:r,link:s,data:o,filters:t}){const n=x=>{const{per_page:u,current_page:a,total:j,last_page:l}=x,h=[];if(Math.ceil(j/u)<1)return null;const d=2;let b=Math.max(1,a-d),g=Math.min(l,a+d);a-d<1&&(g=Math.min(l,1+d*2)),a+d>l&&(b=Math.max(1,l-d*2));for(let i=b;i<=g;i++){const p=i===a;h.push(e.jsx(v,{disabled:p,onClick:()=>m.get(route(s),{page:i},{preserveState:!0,preserveScroll:!0,replace:!0}),className:`rounded-lg px-4 py-2 text-sm ${p?"cursor-default":"border"}`,children:i},i))}return e.jsx("div",{className:"flex gap-2",children:h})};return e.jsx("div",{className:"px-6 py-2",children:e.jsx("div",{className:"mt-6 rounded-lg border p-4 shadow-sm",children:e.jsxs("div",{className:"flex flex-col items-center justify-between gap-4 md:flex-row",children:[e.jsxs("span",{className:"text-sm text-gray-100",children:["Menampilkan ",o.length,"-",r.per_page," dari ",r.total," item"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{disabled:r.current_page===1,onClick:()=>m.get(route(s),{search:t.searchQuery,page:r.current_page-1},{preserveState:!0,preserveScroll:!0,replace:!0}),className:`rounded-lg border px-4 py-2 ${r.current_page===1?"hidden":"block"}`,children:e.jsx(q,{className:"w-4 h-4"})}),n(r),e.jsx(v,{disabled:r.current_page===r.last_page,onClick:()=>m.get(route(s),{search:t.searchQuery,page:r.current_page+1},{preserveState:!0,preserveScroll:!0,replace:!0}),className:`rounded-lg border px-3 py-2 ${r.current_page===r.last_page?"hidden":"block"}`,children:e.jsx(G,{className:"w-4 h-4"})})]})]})})})}export{ne as P,oe as S};
