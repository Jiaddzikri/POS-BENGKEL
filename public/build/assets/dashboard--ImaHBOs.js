import{r as p,j as e,S as b,L as C}from"./app-DU2ribiw.js";import{n as x}from"./number-format-C9-KG7aE.js";import{D as L,a as P,T as S,L as _,C as B,b as M,c as T,P as A,d as $,B as W,p as E,e as z,f as F,A as I}from"./index-Dvqapj0j.js";import{B as j}from"./button-CW_BygfF.js";import{P as V,a as H,C as U,b as q,c as G}from"./popover-a-v8YfAw.js";import{S as K,a as R,b as O,c as J,e as Q,d as m}from"./select-BvX41nsz.js";import{f as c}from"./setYear-oS4mZueu.js";import{T as X}from"./triangle-alert-BSqGlCEf.js";import{c as v}from"./date-convert-B8mAUiOy.js";import{S as Y}from"./shopping-cart-BxiBoIeG.js";import{U as Z,A as ee}from"./app-layout-u2djOQda.js";import{P as ae}from"./package-BbxoBmR0.js";import{c as N}from"./createLucideIcon-Du4cilnx.js";import{E as re}from"./eye-B-gTgA8J.js";/* empty css            */import"./utils-jAU0Cazi.js";import"./differenceInCalendarDays-D_tGss6D.js";import"./index-CqT6Fen0.js";import"./index-CUOMgGua.js";import"./index-dU2Z2OwV.js";import"./index-BFHOmMwe.js";import"./check-BH0nM-99.js";import"./parseISO-ClzP4Ygj.js";import"./index-8iJUX0HI.js";import"./x-Bee98Yzc.js";import"./input-DRGjZ_Fc.js";import"./index-Dx_FcIva.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],se=N("ArrowDownRight",te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],de=N("ArrowUpRight",le);function ne(a){const r=[];for(let s=0;s<a;s++){const n=Math.floor(Math.random()*360);r.push(`hsl(${n}, 70%, 80%)`)}return r}function ie({bestSellingCategory:a}){const r=p.useMemo(()=>ne(a.length),[a.length]);return e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-white p-6 dark:border-sidebar-border dark:bg-gray-900",children:[e.jsx("div",{className:"mb-4 flex items-center justify-between",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Kategori Produk Terlaris"})}),a.length===0?e.jsxs("div",{className:"flex h-80 flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:e.jsx("svg",{className:"h-8 w-8 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h4",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-white",children:"Belum Ada Data Kategori"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Data kategori produk terlaris akan muncul setelah ada transaksi penjualan"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex h-80 items-center justify-center",children:e.jsx("div",{className:"h-80 w-80",children:e.jsx(L,{data:{labels:a.map(t=>t.category),datasets:[{data:a.map(t=>t.total_revenue),backgroundColor:r,borderColor:"#ffffff",borderWidth:3,hoverBackgroundColor:r,hoverBorderWidth:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",callbacks:{label:function(t){return`${t.label}: Rp${x(t.parsed)}`}}}},cutout:"60%"}})})}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-4",children:a.map((t,l)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:r[l]}}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[t.category," (Rp. ",x(t.total_revenue),")"]})]},t.category))})]})]})}function oe({children:a}){return e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:a})}function ce({dateRange:a,handleApplyCustomDate:r,selectedPeriod:t,setDateRange:l,handlePeriodChange:s}){return e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Selamat datang kembali!"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(K,{value:t,onValueChange:n=>s(n),children:[e.jsx(R,{className:"w-[180px]",children:e.jsx(O,{placeholder:"Pilih Periode"})}),e.jsx(J,{children:e.jsxs(Q,{children:[e.jsx(m,{value:"today",children:"Hari Ini"}),e.jsx(m,{value:"week",children:"1 Minggu Terakhir"}),e.jsx(m,{value:"month",children:"1 Bulan Terakhir"}),e.jsx(m,{value:"year",children:"1 Tahun Terakhir"})]})})]}),e.jsxs(V,{children:[e.jsx(H,{asChild:!0,children:e.jsxs(j,{variant:"outline",size:"sm",className:"w-[280px] justify-start text-left font-normal",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),a!=null&&a.from?a.to?e.jsxs(e.Fragment,{children:[c(a.from,"LLL dd, y")," - ",c(a.to,"LLL dd, y")]}):c(a.from,"LLL dd, y"):e.jsx("span",{children:"Pilih rentang tanggal"})]})}),e.jsx(q,{className:"w-auto p-0",align:"end",children:e.jsx(G,{initialFocus:!0,mode:"range",defaultMonth:a==null?void 0:a.from,selected:a,onSelect:l,numberOfMonths:2})})]}),e.jsx(j,{onClick:r,children:"Apply Custom Date"})]})]})}function xe({children:a}){return e.jsx("div",{className:"flex h-full flex-1 flex-col gap-6 overflow-x-auto rounded-xl p-6",children:a})}function me({lowStockItems:a}){return e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-white p-6 dark:border-sidebar-border dark:bg-gray-900",children:[e.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[e.jsx(X,{className:"h-5 w-5 text-orange-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Stok Menipis"})]}),a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-green-100 dark:bg-green-900/20",children:e.jsx("svg",{className:"h-8 w-8 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h4",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-white",children:"Semua Stok Aman"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Tidak ada produk dengan stok menipis saat ini"})]}):e.jsx("div",{className:"space-y-4",children:a.map(r=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3 dark:bg-gray-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.item_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Minimal: ",r.minimum_stock," unit"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-semibold ${r.status==="critical"?"text-red-600":"text-orange-600"}`,children:[r.stock," unit"]}),e.jsx("span",{className:`rounded-full px-2 py-1 text-xs ${r.low_stock?"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400":r.quantity===0?"bg-orange-100 text-orange-800 dark:bg-orange-900/20 dark:text-orange-400":""}`,children:r.low_stock?"Peringatan":r.quantity===0?"Stock Kosong":""})]})]},r.sku))})]})}function he({revenue:a,filters:r,totalTransaction:t,completedTransaction:l,activeCustomer:s}){const n=v(r.range,r.startDate,r.endDate),o=({title:h,value:g,change:u,icon:f,positive:i=!0})=>e.jsx("div",{className:"relative overflow-hidden rounded-xl border border-sidebar-border/70 bg-white p-6 dark:border-sidebar-border dark:bg-gray-900",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:h}),e.jsx("p",{className:"text-xl font-bold text-gray-900 dark:text-white",children:g}),e.jsxs("div",{className:`mt-2 flex items-center text-[0.75rem] ${i?"text-green-600":"text-red-600"}`,children:[i?e.jsx(de,{className:"mr-1 h-4 w-4"}):e.jsx(se,{className:"mr-1 h-4 w-4"}),e.jsxs("span",{children:[u,"% ",n]})]})]}),e.jsx("div",{className:`rounded-full p-3 ${i?"bg-green-100 dark:bg-green-900/20":"bg-red-100 dark:bg-red-900/20"}`,children:e.jsx(f,{className:`h-6 w-6 ${i?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`})})]})});return e.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-4",children:[e.jsx(o,{title:"Total Penjualan",value:`Rp ${x(a.revenue)}`,change:a.percentage,icon:P,positive:a.trend==="increase"}),e.jsx(o,{title:"Total Transaksi",value:`${t.total}`,change:`${t.percentage}`,icon:Y,positive:t.trend==="increase"}),e.jsx(o,{title:"Pelanggan Aktif",value:`${s.total}`,change:s.percentage,icon:Z,positive:s.trend==="increase"}),e.jsx(o,{title:"Produk Terjual",value:`${l.total}`,change:l.percentage,icon:ae,positive:l.trend==="increase"})]})}function ge({salesTrend:a,filters:r}){const t=v(r.range,r.startDate,r.endDate),l=a.labels.length>0&&a.value.length>0;return e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-white p-6 dark:border-sidebar-border dark:bg-gray-900",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Grafik Penjualan "}),e.jsx(S,{className:"h-5 w-5 text-green-600"})]}),l?e.jsx("div",{className:"h-80",children:e.jsx(_,{data:{labels:a.labels.map(s=>s),datasets:[{label:"Pendapatan (Rp)",data:a.value.map(s=>s),borderColor:"#8B5CF6",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:3,fill:!0,tension:.4,pointBackgroundColor:"#8B5CF6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#ffffff",bodyColor:"#ffffff",borderColor:"#8B5CF6",borderWidth:1,callbacks:{label:function(s){return`Pendapatan: Rp ${s.parsed.y.toLocaleString()}`}}}},scales:{x:{grid:{color:"rgba(156, 163, 175, 0.2)"},ticks:{color:"#6B7280"}},y:{grid:{color:"rgba(156, 163, 175, 0.2)"},ticks:{color:"#6B7280",callback:function(s){return"Rp "+s.toLocaleString()}}}}}})}):e.jsxs("div",{className:"flex h-80 flex-col items-center justify-center text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:e.jsx("svg",{className:"h-8 w-8 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h4",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-white",children:"Belum Ada Data Penjualan"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Grafik penjualan akan muncul setelah ada transaksi pada periode ",t.toLowerCase()]})]})]})}function ue({children:a}){return e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:a})}function fe({bestSellingItem:a}){return e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-white p-6 dark:border-sidebar-border dark:bg-gray-900",children:[e.jsx("h3",{className:"mb-4 text-lg font-semibold text-gray-900 dark:text-white",children:"Produk Terlaris"}),a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",children:e.jsx("svg",{className:"h-8 w-8 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),e.jsx("h4",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-white",children:"Belum Ada Data Penjualan"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Data produk terlaris akan muncul setelah ada transaksi penjualan"})]}):e.jsx("div",{className:"space-y-4",children:a.map((r,t)=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg bg-gray-50 p-3 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-blue-100 text-sm font-semibold text-blue-600 dark:bg-blue-900/20 dark:text-blue-400",children:t+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:r.item_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[r.total_quantity," terjual"]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("p",{className:"font-semibold text-gray-900 dark:text-white",children:["Rp ",x(r.total_revenue)]})})]},r.item_name))})]})}function pe({children:a}){return e.jsxs("div",{className:"rounded-xl border border-sidebar-border/70 bg-white p-6 dark:border-sidebar-border dark:bg-gray-900",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Transaksi Terbaru"}),e.jsxs(j,{onClick:()=>b.get(route("transaction.index")),className:"flex items-center gap-2 bg-blue-600 text-sm text-white hover:bg-blue-700",children:[e.jsx(re,{className:"h-4 w-4"}),"Lihat Semua"]})]}),e.jsx("div",{className:"overflow-x-auto",children:a})]})}function be({newestTransactions:a}){return e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700",children:[e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 dark:text-gray-400",children:"ID Transaksi"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 dark:text-gray-400",children:"Jam"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 dark:text-gray-400",children:"Pelanggan"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 dark:text-gray-400",children:"Items"}),e.jsx("th",{className:"px-4 py-3 text-left font-medium text-gray-500 dark:text-gray-400",children:"Total"})]})}),e.jsx("tbody",{children:a.map(r=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50 dark:border-gray-800 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-gray-900 dark:text-white",children:r.transaction_id}),e.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:r.transaction_time}),e.jsx("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:r.buyer_name}),e.jsxs("td",{className:"px-4 py-3 text-gray-600 dark:text-gray-400",children:[r.total_items," item"]}),e.jsxs("td",{className:"px-4 py-3 font-semibold text-gray-900 dark:text-white",children:["Rp ",x(r.final_amount)]})]},r.transaction_id))})]})}B.register(M,T,A,$,W,E,z,F,I);const je=[{title:"Dashboard",href:"/"}];function Re({revenue:a,totalTransaction:r,filters:t,completedTransaction:l,activeCustomer:s,salesTrend:n,bestSellingCategory:o,bestSellingItem:h,lowStockItems:g,newestTransactions:u}){const[f,i]=p.useState(t.range),[d,y]=p.useState({from:t!=null&&t.startDate?new Date(t.startDate):void 0,to:t!=null&&t.endDate?new Date(t.endDate):void 0}),w=k=>{i(k),y({from:void 0,to:void 0}),b.get(route("dashboard"),{range:k},{preserveState:!0,replace:!0})},D=()=>{if(!(d!=null&&d.from)||!d.to){alert("Silakan pilih tanggal mulai dan akhir.");return}if(d.to<d.from){alert("Tanggal akhir tidak boleh lebih awal dari tanggal mulai.");return}i(""),b.get(route("dashboard"),{startDate:c(d.from,"yyyy-MM-dd"),endDate:c(d.to,"yyyy-MM-dd")},{preserveState:!0,replace:!0})};return e.jsxs(ee,{breadcrumbs:je,children:[e.jsx(C,{title:"Dashboard POS"}),e.jsxs(xe,{children:[e.jsx(ce,{selectedPeriod:f,handlePeriodChange:w,dateRange:d,handleApplyCustomDate:D,setDateRange:y}),e.jsx(he,{activeCustomer:s,completedTransaction:l,filters:t,totalTransaction:r,revenue:a}),e.jsxs(oe,{children:[e.jsx(ge,{filters:t,salesTrend:n}),e.jsx(ie,{bestSellingCategory:o})]}),e.jsxs(ue,{children:[e.jsx(fe,{bestSellingItem:h}),e.jsx(me,{lowStockItems:g.data})]}),e.jsx(pe,{children:e.jsx(be,{newestTransactions:u})})]})]})}export{Re as default};
