import{r as h,j as e,b as u}from"./app-DU2ribiw.js";import{A as j,a as N,b as y}from"./accordion-DUn1M_Va.js";import{a as f}from"./date-convert-B8mAUiOy.js";import{c}from"./currency-convert-C0WIlmuJ.js";import{B as b}from"./button-CW_BygfF.js";import{D as g}from"./download-B_uNjFTe.js";/* empty css            */import"./index-CqT6Fen0.js";import"./utils-jAU0Cazi.js";import"./parseISO-ClzP4Ygj.js";import"./differenceInCalendarDays-D_tGss6D.js";import"./createLucideIcon-Du4cilnx.js";function L({sales_transaction:d}){const[i,x]=h.useState(null);function o(t,r,n){var l,s;return i!==n?null:e.jsx("tr",{className:"gap-5 bg-muted/20",children:e.jsx("td",{className:"py-4 px-4 d-block",colSpan:8,children:e.jsx(j,{type:"single",collapsible:!0,className:"w-full",value:n,children:e.jsx(N,{value:n,children:e.jsx(y,{className:"accordion-content flex flex-col text-balance p-0",children:e.jsxs("table",{className:"w-full text-xs ",children:[e.jsx("thead",{className:"border rounded-[100px] text-left mx-5",children:e.jsxs("tr",{className:"text-sm font-semibold",children:[e.jsx("th",{className:"px-2 py-2 text-center",children:"No"}),e.jsx("th",{className:"px-2 py-2",children:"Item Name"}),e.jsx("th",{className:"px-2 py-2",children:"SKU"}),e.jsx("th",{className:"px-2 py-2",children:"Variant Name"}),e.jsx("th",{className:"px-2 py-2 text-center",children:"Quantity"}),e.jsx("th",{className:"px-2 py-2",children:"Price"}),e.jsx("th",{className:"px-2 py-2",children:"Total"})]})}),e.jsx("tbody",{children:r.map((a,p)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-2 py-2 text-center",children:p+1}),e.jsx("td",{className:"px-2 py-2",children:a.item_name}),e.jsx("td",{className:"px-2 py-2",children:a.sku}),e.jsx("td",{className:"px-2 py-2",children:a.variant_name}),e.jsxs("td",{className:"px-2 py-2 text-center",children:["x ",a.quantity]}),e.jsx("td",{className:"px-2 py-2 text-right",children:c(a.price_at_sale)}),e.jsx("td",{className:"px-2 py-2 text-right",children:c(a.sub_total)})]},a.id))}),e.jsxs("tfoot",{className:"text-xs",children:[e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{colSpan:6,className:"text-right pr-4 pt-3 font-semibold",children:"Total"}),e.jsx("td",{className:"text-right py-1 pr-2 pt-3",children:c(t.total_amount)})]}),((s=(l=t.buyer)==null?void 0:l.discount)==null?void 0:s.active)&&e.jsxs("tr",{className:"align-top",children:[e.jsx("td",{colSpan:6,className:"text-right pr-4 py-1 font-semibold",children:"Discount"}),e.jsx("td",{className:"text-right py-1 pr-2 text-destructive-foreground space-y-1",children:e.jsxs("div",{children:[" (",t.buyer.discount.discount_percent,"%) ",e.jsx("span",{className:"text-muted-foreground",children:"- "})]})})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:6,className:"text-right pr-4 py-1 font-semibold",children:"Final Amount"}),e.jsx("td",{className:"text-right py-1 pr-2",children:c(t.final_amount)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:6,className:"text-right pr-4 py-1 font-semibold",children:"Amount Paid"}),e.jsx("td",{className:"text-right py-1 pr-2",children:c(t.amount_paid)})]}),e.jsxs("tr",{children:[e.jsx("td",{colSpan:6,className:"text-right pr-4 py-1 font-semibold",children:"Change"}),e.jsx("td",{className:"text-right py-1 pr-2",children:c(t.change)})]})]})]})})})})})})}const m=async t=>{try{const r=await fetch(route("transaction.receipt.download",{orderId:t}));if(!r.ok)throw new Error("Gagal mengunduh struk dari server.");const n=await r.blob(),l=window.URL.createObjectURL(n),s=document.createElement("a");s.href=l,s.download=`struk-${t}.pdf`,document.body.appendChild(s),s.click(),s.remove(),window.URL.revokeObjectURL(l)}catch{alert("Gagal mengunduh file.")}};return e.jsx("div",{className:"px-6 py-2",children:e.jsx("div",{className:"rounded-lg border",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"border-b",children:e.jsxs("tr",{className:"text-center",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Store Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Invoice Number"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Payment"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium tracking-wider uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y",children:d.map(t=>e.jsxs(u.Fragment,{children:[e.jsxs("tr",{onClick:()=>x(i===t.invoice_number?null:t.invoice_number),className:"hover:bg-accent-foreground hover:text-background transition duration-700 ease-out cursor-pointer",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm font-medium",children:t.tenant_name})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm font-medium",children:t.invoice_number})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm",children:t.buyer.name})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:"text-sm",children:t.payment_method})}),e.jsx("td",{children:e.jsx("span",{className:"text-sm",children:f(t.date)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx(b,{variant:"outline",className:"hover:bg-accent-foreground hover:text-background",onClick:r=>{r.stopPropagation(),m(t.order_id)},children:e.jsx(g,{})})})]}),o(t,t.transaction_details,t.invoice_number)]},t.invoice_number))})]})})})})}export{L as default};
